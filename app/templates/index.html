<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Our website aggregates data generated by the entire Nostr community, truly reflecting the intellectual dynamics and development trends within the Nostr ecosystem. This data is not only a crystallization of the community's collective wisdom but also a vital window into the future of decentralized networks. Through in-depth analysis and exploration, we are committed to uncovering the potential value of this data, providing unique insights and decision-making support for community members and researchers alike.">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NostrHTTP for search engine indexing and access to Nostr data</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap.min.css') }}">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static',filename='logo.png') }}">
</head>
<body>

    <div class="container">
        <!-- 左侧导航栏 -->
        <div class="sidebar">
            <h2>导航栏</h2>
		    {% if Home %}
            <h2><a href={{Home}}>Home</a></h2>
		    {% endif %}
            <ul>
        	{% for item in relays %}
		<li><a href="/relay/{{item}}">{{item}}</a></li>
        	{% endfor %}
            </ul>
        </div>

        <!-- 右侧内容区域 -->
        <div class="content">
    
               <div class="search-container">
                <!-- 搜索输入框 -->
                <input
                  type="text"
                  id="searchInput"
                  class="search-input"
                  placeholder="请输入关键词..."
                  onkeydown="handleKeyDown(event)"
                 />
                <!-- 搜索按钮 -->
                <button class="search-button" onclick="handleSearch()">搜索</button>
           </div>

	       <div class="">
		     {% if data|length > 2 %}
		     <a href="?since={{data[0].created_at}}&kind={{kind}}" class="btn btn-outline-primary btn-sm">prev</a>
		     <a href="?until={{data[-1].created_at}}&kind={{kind}}"class="btn btn-outline-primary btn-sm">next</a>
		     {% endif %}
		     
		     {% if notes != 1 %}
               {% if time_filter and time_filter.type is not none%}
                <a href="?kind=30023&{{time_filter.type}}={{time_filter.val}}" class="btn btn-outline-primary btn-sm" >Articles</a>
               {% else %}
                <a href="?kind=30023" class="btn btn-outline-primary btn-sm">Articles</a>
		       {% endif %}
		     {% endif %}
            </div>
	
    	  <ul class="ulcontent">
        	{% for item in data %}
                   <li>
                    <div style="display: flex; align-items: center; margin-bottom:5px;">
                       {% if item.author and item.author.display_name %}
                        <img src="{{item.author.picture if item.author.picture else url_for('static', filename='nostr-icon-purple-64x64.png')}}" 
                            alt="" class="rounded-circle" width="32" height="32"> @ {{item.author.display_name}}
                       {% else %}
                        <img src="{{ url_for('static', filename='nostr-icon-purple-64x64.png') }}"  class="rounded-circle" width="32" height="32"> @ {{item.pubkey[:8]}}:{{item.pubkey[-8:]}}
                       {% endif %}

                     <div class="time"  style="margin-left: auto;">{{item.created_at_d}}</div>
                    </div>
			        <div>{{ item.content }}</div>

            		<div class="linkgroup">
        			<a href="https://yakihonne.com/notes/{{item.neventid}}" class="btn btn-outline-primary btn-sm">yakihonne.com</a>
		        	<a href="https://iris.to/{{item.neventid}}" class="btn btn-outline-primary btn-sm">iris.to</a>
			        <a href="https://jumble.social/notes/{{item.neventid}}" class="btn btn-outline-primary btn-sm">jumble.social</a>
                    {% if notes != 1 %}
			            <a href="/notes/{{item.neventid}}{{url}}" class="btn btn-outline-primary btn-sm">Me</a>
                    {% endif %}
            		</div>

		  </li>
	    {% endfor %}
    	 </ul>
        </div>
    </div>
    <script>
        // 处理回车键
        function handleKeyDown(event) {
            if (event.key === 'Enter') {
                handleSearch();
            }
        }

        // 处理搜索
        function handleSearch() {
            const keyword = document.getElementById('searchInput').value.trim();
            if (keyword) {
                window.location.href = `/search?q=${encodeURIComponent(keyword)}`;
            } else {
                alert('请输入搜索关键词！');
            }
        }
    </script>

</body>
</html>
